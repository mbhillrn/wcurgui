/* MBCore Dashboard - Dark Terminal Theme - v5 Redesign */
/* Fonts: Inter (UI) + JetBrains Mono (data) */

:root {
    --bg-primary: #0d1117;
    --bg-secondary: #161b22;
    --bg-tertiary: #21262d;
    --bg-sidebar: #131921;
    --border-primary: #30363d;
    --border-subtle: #21262d;
    --text-primary: #e6edf3;
    --text-secondary: #8b949e;
    --text-dim: #6e7681;
    --accent: #58a6ff;
    --green: #3fb950;
    --green-dim: #238636;
    --red: #f85149;
    --yellow: #d29922;
    --orange: #f0883e;
    --net-ipv4: #e3b341;
    --net-ipv6: #f07178;
    --net-onion: #4a9eff;
    --net-i2p: #6830e6;
    --net-cjdns: #d2a8ff;
    --sidebar-width: 280px;
    --font-ui: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
    --font-data: 'JetBrains Mono', 'Cascadia Code', 'Fira Code', 'Consolas', monospace;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

html, body {
    height: 100%;
    background: var(--bg-primary);
    color: var(--text-primary);
    font-family: var(--font-ui);
    font-size: 13px;
    line-height: 1.5;
    overflow-x: hidden;
}

.data-value {
    font-family: var(--font-data);
    font-weight: 500;
}

/* ═══════════════════════════════════════════════════════════════ */
/* CONTAINER                                                       */
/* ═══════════════════════════════════════════════════════════════ */
.container {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    padding: 0 12px 12px;
    gap: 8px;
}

/* ═══════════════════════════════════════════════════════════════ */
/* HEADER                                                          */
/* ═══════════════════════════════════════════════════════════════ */
.header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 10px 16px 8px;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border-primary);
    border-radius: 0 0 8px 8px;
    position: sticky;
    top: 0;
    z-index: 100;
}

.header-left {
    display: flex;
    flex-direction: column;
    gap: 1px;
}

.header-logo-row {
    display: flex;
    align-items: baseline;
    gap: 12px;
}

.logo-text {
    font-family: var(--font-ui);
    font-size: 28px;
    font-weight: 700;
    color: var(--text-primary);
    letter-spacing: -0.3px;
    cursor: default;
}

.logo-m {
    color: #4a90d9;
}

.logo-btc {
    color: #7ec8e3;
    font-weight: 700;
}

.logo-core {
    color: #4a90d9;
}

.logo-light {
    font-weight: 400;
    color: var(--text-secondary);
    margin-left: 6px;
}

.version {
    font-size: 14px;
    font-weight: 400;
    color: var(--text-dim);
    font-family: var(--font-data);
}

.header-author {
    font-size: 13px;
    color: var(--text-dim);
}

.author-link {
    color: var(--text-secondary);
    text-decoration: none;
}
.author-link:hover { color: var(--text-primary); text-decoration: underline; }

.header-btc-line {
    font-size: 12px;
    color: var(--text-dim);
}

.btc-copy {
    color: var(--text-dim);
    cursor: pointer;
    font-family: var(--font-data);
    font-size: 11px;
}
.btc-copy:hover { color: var(--accent); }

.header-right {
    display: flex;
    align-items: center;
    gap: 10px;
    position: relative;
}

.header-time {
    font-size: 13px;
    color: var(--text-secondary);
}

.header-btn {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    border: 1px solid var(--border-primary);
    border-radius: 6px;
    padding: 4px 10px;
    cursor: pointer;
    font-family: var(--font-ui);
    font-size: 11px;
    font-weight: 500;
    transition: all 0.15s;
}
.header-btn:hover {
    background: var(--border-primary);
    color: var(--text-primary);
}

.header-btn-settings {
    padding: 5px 7px;
    display: flex;
    align-items: center;
}

/* Settings Dropdown */
.settings-dropdown, .node-config-dropdown {
    display: none;
    position: fixed;
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: 8px;
    padding: 12px;
    min-width: 200px;
    z-index: 1000;
    box-shadow: 0 8px 24px rgba(0,0,0,0.4);
}
.settings-dropdown.active, .node-config-dropdown.active { display: block; }

.dropdown-section { margin-bottom: 4px; }
.dropdown-section-title {
    font-size: 11px;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: block;
    margin-bottom: 6px;
}
.dropdown-row {
    display: flex;
    align-items: center;
    gap: 6px;
}
.dropdown-unit {
    font-size: 11px;
    color: var(--text-dim);
}
.dropdown-hint {
    font-size: 10px;
    margin-top: 2px;
    min-height: 14px;
}
.hint-warn { color: var(--yellow); }
.dropdown-divider {
    border-top: 1px solid var(--border-primary);
    margin: 8px 0;
}
.dropdown-checkbox {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 2px 0;
}
.dropdown-checkbox input { cursor: pointer; }

.refresh-input {
    width: 36px;
    background: var(--bg-primary);
    border: 1px solid var(--border-primary);
    border-radius: 4px;
    color: var(--text-primary);
    font-family: var(--font-data);
    font-size: 12px;
    padding: 3px 5px;
    text-align: center;
}
.refresh-input:focus { outline: 1px solid var(--accent); border-color: var(--accent); }

.info-currency-select {
    width: 100%;
    background: var(--bg-primary);
    border: 1px solid var(--border-primary);
    border-radius: 4px;
    color: var(--text-primary);
    font-family: var(--font-ui);
    font-size: 12px;
    padding: 4px 6px;
    cursor: pointer;
}

/* ═══════════════════════════════════════════════════════════════ */
/* MAIN CONTENT - TWO COLUMN LAYOUT                                */
/* ═══════════════════════════════════════════════════════════════ */
.main-content {
    display: flex;
    gap: 8px;
    flex: 1;
    min-height: 0;
}

.content-left {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 8px;
    min-width: 0;
}

/* ═══════════════════════════════════════════════════════════════ */
/* PANELS (shared)                                                 */
/* ═══════════════════════════════════════════════════════════════ */
.panel {
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: 8px;
    overflow: hidden;
}

.panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 6px 12px;
    border-bottom: 1px solid var(--border-subtle);
    min-height: 34px;
    flex-wrap: wrap;
    gap: 6px;
}

.panel-header h2 {
    font-family: var(--font-ui);
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
    white-space: nowrap;
}

/* ═══════════════════════════════════════════════════════════════ */
/* NODE STATUS BAR                                                 */
/* ═══════════════════════════════════════════════════════════════ */
.node-status-bar {
    display: flex;
    align-items: center;
    padding: 8px 14px;
    gap: 16px;
    flex-wrap: wrap;
}

.node-status-left {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
}

.status-indicator {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--text-dim);
    flex-shrink: 0;
}
.status-indicator.connected {
    background: var(--green);
    box-shadow: 0 0 6px var(--green);
    animation: pulse-dot 2s ease-in-out infinite;
}
.status-indicator.disconnected {
    background: var(--red);
    box-shadow: 0 0 6px var(--red);
}

@keyframes pulse-dot {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.status-text {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-secondary);
}

.status-count {
    font-size: 20px;
    font-weight: 700;
    color: var(--text-primary);
    margin-left: 2px;
    cursor: help;
}

.protocol-status {
    display: flex;
    gap: 12px;
    align-items: center;
    margin-left: 8px;
}
.protocol-line {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
}
.protocol-hoverable {
    cursor: help;
    padding: 2px 6px;
    border-radius: 4px;
    transition: background 0.15s;
}
.protocol-hoverable:hover {
    background: rgba(255,255,255,0.04);
}
.protocol-label {
    color: var(--text-dim);
    font-weight: 500;
}
.protocol-list {
    color: var(--text-secondary);
    font-family: var(--font-data);
    font-size: 12px;
}
/* Protocol network name colors */
.proto-ipv4 { color: var(--net-ipv4); }
.proto-ipv6 { color: var(--net-ipv6); }
.proto-onion { color: var(--net-onion); }
.proto-i2p { color: var(--net-i2p); }
.proto-cjdns { color: var(--net-cjdns); }
.proto-all-configured { color: var(--green); font-style: italic; }

.protocol-hint {
    font-size: 11px;
    color: var(--text-dim);
    font-style: italic;
}

/* Network Columns */
.node-status-networks {
    display: flex;
    gap: 2px;
    margin-left: auto;
}

.network-col {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 4px 10px;
    min-width: 60px;
    border-radius: 4px;
    transition: background 0.15s;
}
.network-col:hover { background: rgba(255,255,255,0.03); }

.network-col.not-configured { opacity: 0.35; }

.net-name {
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.3px;
}
.net-ipv4 { color: var(--net-ipv4); }
.net-ipv6 { color: var(--net-ipv6); }
.net-onion { color: var(--net-onion); }
.net-i2p { color: var(--net-i2p); }
.net-cjdns { color: var(--net-cjdns); }

.net-compact {
    font-size: 12px;
    color: var(--text-secondary);
    font-family: var(--font-data);
}

.net-score {
    font-size: 10px;
    color: var(--text-dim);
    font-family: var(--font-data);
}
.net-score-overlay {
    font-size: 9px;
    color: var(--text-dim);
    font-style: italic;
    font-family: var(--font-ui);
}

/* ═══════════════════════════════════════════════════════════════ */
/* MAP PANEL                                                       */
/* ═══════════════════════════════════════════════════════════════ */
.map-panel {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 450px;
    z-index: 0;
    position: relative;
    overflow: visible;
}

.map-header {
    flex-wrap: wrap;
    gap: 8px;
}

.map-status {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    color: var(--text-dim);
}
.map-title {
    font-family: var(--font-ui);
    font-size: 13px;
    font-weight: 600;
    color: var(--text-primary);
    white-space: nowrap;
    margin-right: 6px;
}
.map-countdown-label { color: var(--text-dim); }
.map-countdown { color: var(--text-secondary); }
.map-status-sep { color: var(--border-primary); }

.status-dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    display: inline-block;
}
.status-dot.status-ok { background: var(--green); }
.status-dot.status-pending { background: var(--yellow); animation: pulse-dot 1.5s ease-in-out infinite; }
.status-dot.status-error { background: var(--red); }

.map-region-selector select {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
    border-radius: 4px;
    color: var(--text-secondary);
    font-family: var(--font-ui);
    font-size: 11px;
    padding: 2px 6px;
    cursor: pointer;
}
.map-region-selector select:hover { color: var(--text-primary); border-color: var(--accent); }

.map-fit-btn {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
    border-radius: 4px;
    color: var(--text-secondary);
    font-family: var(--font-ui);
    font-size: 11px;
    padding: 2px 8px;
    cursor: pointer;
    transition: all 0.15s;
}
.map-fit-btn:hover {
    color: var(--text-primary);
    border-color: var(--accent);
    background: var(--bg-secondary);
}

.map-legend {
    display: flex;
    gap: 12px;
    align-items: center;
    font-size: 11px;
}
.legend-group {
    display: flex;
    align-items: center;
    gap: 4px;
}
.legend-label {
    color: var(--text-dim);
}

.dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    display: inline-block;
}
.dot-ipv4 { background: var(--net-ipv4); }
.dot-ipv6 { background: var(--net-ipv6); }
.dot-onion { background: var(--net-onion); }
.dot-i2p { background: var(--net-i2p); }
.dot-cjdns { background: var(--net-cjdns); }
.dot-unavailable { background: var(--text-dim); }

.antarctica-toggle {
    color: var(--accent);
    text-decoration: none;
    font-weight: 500;
}
.antarctica-toggle:hover { text-decoration: underline; }

.penguin-icon { cursor: help; }

.map-container {
    flex: 1;
    min-height: 420px;
    height: calc(100vh - 320px);
    background: var(--bg-primary);
    width: 100%;
}

/* Stretched map mode - horizontally stretches tiles to show more of the world */
.map-container.map-stretched {
    transform: scaleX(1.5);
    transform-origin: center center;
}

/* ═══════════════════════════════════════════════════════════════ */
/* SIDEBAR                                                         */
/* ═══════════════════════════════════════════════════════════════ */
.sidebar {
    width: var(--sidebar-width);
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.sidebar-section {
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: 8px;
    overflow: visible;
    position: relative;
}

.sidebar-section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 7px 12px;
    border-bottom: 1px solid var(--border-subtle);
}

.sidebar-section-title {
    font-family: var(--font-ui);
    font-size: 12px;
    font-weight: 600;
    color: var(--text-primary);
    letter-spacing: 0.2px;
}

.sidebar-subver {
    font-size: 10px;
    color: var(--text-dim);
    margin-left: 6px;
}

.sidebar-rows {
    padding: 6px 0;
}

.sidebar-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 3px 12px;
    font-size: 12px;
}

.sidebar-label {
    color: var(--text-secondary);
    font-weight: 400;
}

.sidebar-link {
    color: var(--accent) !important;
    cursor: pointer;
    font-weight: 500 !important;
}
.sidebar-link:hover { text-decoration: underline; }

.sidebar-value {
    color: var(--text-primary);
    font-size: 12px;
    text-align: right;
}
.sidebar-value-hoverable {
    cursor: help;
}

.sidebar-unit {
    color: var(--text-dim);
    font-size: 11px;
    font-family: var(--font-ui);
    margin-left: 1px;
}

/* Sync status colors */
.status-ok { color: var(--green); }
.status-syncing { color: var(--yellow); }

/* Sidebar Node Info subver tooltip */
.sidebar-node-subver {
    font-size: 10px;
    color: var(--text-dim);
    font-family: var(--font-data);
    max-width: 150px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Sidebar Traffic Bars */
.sidebar-traffic {
    padding: 6px 12px;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.net-traffic-row-inline {
    display: flex;
    align-items: center;
    gap: 6px;
}
.net-traffic-dir-inline {
    font-size: 10px;
    font-weight: 600;
    color: var(--text-dim);
    width: 24px;
    text-align: right;
    font-family: var(--font-ui);
}
.net-traffic-bar-wrap-inline {
    flex: 1;
    height: 6px;
    background: var(--bg-primary);
    border-radius: 3px;
    overflow: hidden;
}
.net-traffic-bar {
    height: 100%;
    border-radius: 3px;
    transition: width 0.8s ease;
    min-width: 0;
}
.net-traffic-bar-in { background: var(--green); }
.net-traffic-bar-out { background: var(--accent); }
.traffic-high { filter: brightness(1.3); }
.traffic-med { filter: brightness(1.0); }
.traffic-low { filter: brightness(0.7); }

.net-traffic-rate-inline {
    font-size: 10px;
    color: var(--text-secondary);
    min-width: 62px;
    text-align: right;
}

/* Sidebar Price */
.sidebar-price {
    padding: 8px 12px;
    text-align: center;
    position: relative;
}
.sidebar-price-value {
    font-size: 20px;
    font-weight: 500;
    color: var(--text-primary);
    letter-spacing: -0.5px;
}
.sidebar-price-currency-row {
    margin-top: 2px;
}
.sidebar-price-currency {
    font-size: 12px;
    font-weight: 500;
}

/* Currency Dropdown */
.currency-dropdown {
    display: none;
    position: absolute;
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: 8px;
    padding: 12px;
    min-width: 180px;
    z-index: 200;
    box-shadow: 0 8px 24px rgba(0,0,0,0.4);
    left: 50%;
    transform: translateX(-50%);
    top: calc(100% + 4px);
}
.currency-dropdown.active { display: block; }

/* Geo DB Dropdown */
.geodb-dropdown {
    display: none;
    position: absolute;
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: 8px;
    padding: 12px;
    width: 260px;
    z-index: 200;
    box-shadow: 0 8px 24px rgba(0,0,0,0.4);
    right: 0;
    top: calc(100%);
}
.geodb-dropdown.active { display: block; }

.geodb-dropdown-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--accent);
    margin-bottom: 8px;
}
.geodb-dropdown-rows { font-size: 11px; }
.geodb-detail-row {
    display: flex;
    justify-content: space-between;
    padding: 3px 0;
    color: var(--text-secondary);
}
.geodb-detail-row span:first-child { color: var(--text-dim); font-weight: 500; }
.geodb-detail-row span:last-child { color: var(--text-primary); font-family: var(--font-data); font-size: 11px; }
.geodb-path { font-size: 9px !important; word-break: break-all; max-width: 140px; text-align: right; color: var(--accent) !important; }
.geodb-error-row span:last-child { color: var(--red); }
.geodb-warn-row span:last-child { color: var(--yellow); }
.geodb-detail-divider { border-top: 1px solid var(--border-primary); margin: 6px 0; }
.geodb-setting-off { color: var(--text-dim) !important; }
.geodb-dropdown-divider { border-top: 1px solid var(--border-primary); margin: 8px 0; }
.geodb-dropdown-note {
    font-size: 10px;
    color: var(--text-dim);
    line-height: 1.4;
    margin-bottom: 8px;
}
.geodb-update-btn {
    width: 100%;
    background: var(--accent);
    border: 1px solid var(--accent);
    border-radius: 6px;
    color: #fff;
    font-family: var(--font-ui);
    font-size: 12px;
    font-weight: 600;
    padding: 6px 12px;
    cursor: pointer;
    transition: all 0.15s;
}
.geodb-update-btn:hover { background: #79b8ff; border-color: #79b8ff; }
.geodb-update-btn:disabled { opacity: 0.6; cursor: default; background: var(--bg-tertiary); border-color: var(--border-primary); color: var(--text-dim); }
.geodb-update-msg { font-size: 11px; margin-top: 6px; text-align: center; font-weight: 500; }
.geodb-msg-ok { color: var(--green); }
.geodb-msg-err { color: var(--red); }
.geodb-status-badge { font-family: var(--font-data); font-size: 11px; }
.geodb-status-warn { color: var(--yellow); }
.geodb-status-error { color: var(--red); }

/* Sidebar Recent Updates */
.sidebar-section-updates { }

.sidebar-updates-controls {
    display: flex;
    align-items: center;
    gap: 4px;
    position: relative;
}

.sidebar-small-btn {
    background: none;
    border: none;
    color: var(--text-dim);
    cursor: pointer;
    padding: 2px;
    border-radius: 3px;
    display: flex;
    align-items: center;
}
.sidebar-small-btn:hover { color: var(--text-secondary); background: var(--bg-tertiary); }

.sidebar-updates-window {
    padding: 0 12px 4px;
    font-size: 10px;
    color: var(--text-dim);
}

.sidebar-updates-list {
    height: 90px;
    max-height: 90px;
    overflow-y: auto;
    padding: 0 12px 8px;
}

.sidebar-updates-empty {
    font-size: 11px;
    color: var(--text-dim);
    font-style: italic;
    padding: 4px 0;
}

.update-clickable {
    cursor: pointer;
}
.update-clickable:hover {
    text-decoration: underline;
    filter: brightness(1.3);
}

.sidebar-update-item {
    font-family: var(--font-data);
    font-size: 11px;
    padding: 1px 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.sidebar-update-item.update-connected { color: var(--green); }
.sidebar-update-item.update-disconnected { color: var(--red); }

.changes-config-dropdown {
    display: none;
    position: absolute;
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: 6px;
    padding: 8px;
    z-index: 200;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    right: 0;
    top: calc(100% + 4px);
    white-space: nowrap;
}
.changes-config-dropdown.active { display: flex; flex-wrap: wrap; gap: 4px; align-items: center; }

.dropdown-label {
    font-size: 10px;
    color: var(--text-dim);
    margin-right: 4px;
}

.dropdown-option {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
    border-radius: 3px;
    color: var(--text-secondary);
    font-family: var(--font-data);
    font-size: 10px;
    padding: 2px 6px;
    cursor: pointer;
    transition: all 0.15s;
}
.dropdown-option:hover { background: var(--border-primary); color: var(--text-primary); }
.dropdown-option.active { background: var(--accent); color: var(--bg-primary); border-color: var(--accent); }

/* Scrollbar for sidebar updates */
.sidebar-updates-list::-webkit-scrollbar { width: 4px; }
.sidebar-updates-list::-webkit-scrollbar-track { background: transparent; }
.sidebar-updates-list::-webkit-scrollbar-thumb { background: var(--border-primary); border-radius: 2px; }

/* ═══════════════════════════════════════════════════════════════ */
/* PEER TABLE                                                      */
/* ═══════════════════════════════════════════════════════════════ */
.peer-panel {
    display: flex;
    flex-direction: column;
}

.peer-header-left {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
    flex: 1;
}

.panel-controls {
    display: flex;
    align-items: center;
    gap: 6px;
}

.network-counts {
    display: flex;
    align-items: center;
    gap: 4px;
    flex-wrap: wrap;
}

.network-filter-btn {
    font-family: var(--font-data);
    font-size: 11px;
    color: var(--text-dim);
    cursor: pointer;
    padding: 2px 28px 2px 6px;
    border-radius: 3px;
    transition: all 0.15s;
    white-space: nowrap;
    position: relative;
}
.network-filter-btn:hover { color: var(--text-secondary); background: var(--bg-tertiary); }
.network-filter-btn.active { background: var(--bg-tertiary); font-weight: 700; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

/* Active state keeps network colors but bold */
.count-total.active { color: var(--text-primary); }
.count-ipv4.active { color: var(--net-ipv4); }
.count-ipv6.active { color: var(--net-ipv6); }
.count-onion.active { color: var(--net-onion); }
.count-i2p.active { color: var(--net-i2p); }
.count-cjdns.active { color: var(--net-cjdns); }

.count-sep {
    color: var(--border-primary);
    font-size: 11px;
}

.count-ipv4 { color: var(--net-ipv4); }
.count-ipv6 { color: var(--net-ipv6); }
.count-onion { color: var(--net-onion); }
.count-i2p { color: var(--net-i2p); }
.count-cjdns { color: var(--net-cjdns); }

.peer-count {
    font-size: 11px;
    color: var(--text-dim);
    font-family: var(--font-data);
}

/* Peer Action Buttons */
.peer-action-btn {
    font-family: var(--font-ui);
    font-size: 11px;
    font-weight: 500;
    padding: 4px 10px;
    border-radius: 6px;
    border: 1px solid;
    cursor: pointer;
    transition: all 0.15s;
}
.peer-action-btn-connect {
    background: rgba(63, 185, 80, 0.1);
    border-color: var(--green-dim);
    color: var(--green);
}
.peer-action-btn-connect:hover { background: rgba(63, 185, 80, 0.2); }
.peer-action-btn-disconnect {
    background: rgba(248, 81, 73, 0.1);
    border-color: rgba(248, 81, 73, 0.3);
    color: var(--red);
}
.peer-action-btn-disconnect:hover { background: rgba(248, 81, 73, 0.2); }

.config-btn {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
    border-radius: 6px;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 4px 6px;
    display: flex;
    align-items: center;
    transition: all 0.15s;
}
.config-btn:hover { color: var(--text-primary); background: var(--border-primary); }

/* Table */
.table-container {
    overflow: auto;
    flex: 1;
    /* max-height set dynamically by JS based on peer-row-limit setting */
}

.peer-table {
    width: max-content;
    min-width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
    font-family: var(--font-data);
    font-size: 11px;
}

.peer-table thead {
    position: sticky;
    top: 0;
    z-index: 10;
}

.peer-table th {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    font-family: var(--font-ui);
    font-weight: 600;
    font-size: 11px;
    padding: 6px 10px;
    text-align: left;
    white-space: nowrap;
    cursor: pointer;
    user-select: none;
    border-bottom: 1px solid var(--border-primary);
    border-right: 1px solid var(--border-subtle);
    position: relative;
}
.peer-table th:last-child { border-right: none; }
.peer-table th:hover { color: var(--text-primary); }

.peer-table th.sort-asc::after { content: ' ▲'; font-size: 8px; color: var(--accent); }
.peer-table th.sort-desc::after { content: ' ▼'; font-size: 8px; color: var(--accent); }

.peer-table td {
    padding: 4px 10px;
    border-bottom: 1px solid var(--border-subtle);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 200px;
    color: var(--text-primary);
}

.peer-table tr:hover td {
    background: rgba(255,255,255,0.02);
}

.peer-table tr.selected td {
    background: rgba(88, 166, 255, 0.08);
}

/* Network-colored rows */
.network-row-ipv4 td { border-left: 2px solid rgba(227, 179, 65, 0.3); }
.network-row-ipv6 td { border-left: 2px solid rgba(240, 136, 62, 0.3); }
.network-row-onion td { border-left: 2px solid rgba(240, 113, 120, 0.3); }
.network-row-i2p td { border-left: 2px solid rgba(104, 48, 230, 0.3); }
.network-row-cjdns td { border-left: 2px solid rgba(210, 168, 255, 0.3); }
.network-row-ipv4 td:first-child { border-left-width: 2px; }
.network-row-ipv6 td:first-child { border-left-width: 2px; }
.network-row-onion td:first-child { border-left-width: 2px; }
.network-row-i2p td:first-child { border-left-width: 2px; }
.network-row-cjdns td:first-child { border-left-width: 2px; }

/* Only first td gets border-left for network indicator */
.network-row-ipv4 td:not(:first-child),
.network-row-ipv6 td:not(:first-child),
.network-row-onion td:not(:first-child),
.network-row-i2p td:not(:first-child),
.network-row-cjdns td:not(:first-child) {
    border-left: none;
}

/* Direction badges */
.direction-badge {
    padding: 1px 5px;
    border-radius: 3px;
    font-size: 10px;
    font-weight: 500;
}
.direction-badge.in, .badge-in {
    background: rgba(63, 185, 80, 0.15);
    color: var(--green);
}
.direction-badge.out, .badge-out {
    background: rgba(88, 166, 255, 0.15);
    color: var(--accent);
}

/* Connection type badges - inbound green bg, outbound blue bg */
.conn-type-badge {
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.3px;
}
.conn-type-inbound { background: rgba(63, 185, 80, 0.25); color: var(--green); }
.conn-type-outbound { background: rgba(88, 166, 255, 0.25); color: var(--accent); }
.conn-type-text-yellow { color: var(--net-ipv4) !important; }
.conn-type-text-lightblue { color: #79b8ff !important; }

/* Addrman status */
.addrman-yes { color: var(--green); font-weight: 600; }
.addrman-no { color: var(--red); }
.addrman-checking { color: var(--text-dim); font-style: italic; }

/* Bytes sent/received colors */
.bytes-sent { color: var(--accent); }
.bytes-recv { color: var(--green); }

/* Network text colors for table cells - needs specificity to override .peer-table td */
.peer-table td.network-ipv4, .network-ipv4 { color: var(--net-ipv4); }
.peer-table td.network-ipv6, .network-ipv6 { color: var(--net-ipv6); }
.peer-table td.network-onion, .network-onion { color: var(--net-onion); }
.peer-table td.network-i2p, .network-i2p { color: var(--net-i2p); }
.peer-table td.network-cjdns, .network-cjdns { color: var(--net-cjdns); }
.peer-table td.bytes-sent { color: var(--accent); }
.peer-table td.bytes-recv { color: var(--green); }
.peer-table td.addrman-yes { color: var(--green); font-weight: 600; }
.peer-table td.addrman-no { color: var(--red); }

/* Hidden columns */
.col-hidden { display: none !important; }

.loading-row td {
    text-align: center;
    color: var(--text-dim);
    padding: 20px;
    font-style: italic;
    font-family: var(--font-ui);
}

/* Column resize handle */
.col-resize-handle {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 4px;
    cursor: col-resize;
    background: transparent;
}
.col-resize-handle:hover,
.col-resize-handle.resizing {
    background: var(--accent);
}

/* Row highlight animation */
@keyframes row-highlight {
    0% { background: rgba(88, 166, 255, 0.15); }
    100% { background: transparent; }
}
.row-highlight td {
    animation: row-highlight 1.5s ease-out;
}

/* Panel resize handle */
.resize-handle {
    height: 6px;
    cursor: ns-resize;
    background: transparent;
    transition: background 0.15s;
}
.resize-handle:hover { background: rgba(88, 166, 255, 0.2); }

.resizable-panel {
    min-height: 100px;
    overflow: hidden;
}

/* ═══════════════════════════════════════════════════════════════ */
/* DISCONNECT DROPDOWN                                             */
/* ═══════════════════════════════════════════════════════════════ */
.disconnect-dropdown {
    display: none;
    position: fixed;
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: 8px;
    padding: 14px;
    width: 320px;
    z-index: 1000;
    box-shadow: 0 8px 24px rgba(0,0,0,0.5);
}
.disconnect-dropdown.active { display: block; }

.disconnect-warning {
    display: flex;
    align-items: center;
    gap: 6px;
    color: var(--yellow);
    font-size: 11px;
    font-weight: 600;
}
.warning-icon { font-size: 14px; }
.disconnect-subtext {
    font-size: 10px;
    color: var(--text-dim);
    margin-top: 4px;
}
.disconnect-divider {
    border-top: 1px solid var(--border-primary);
    margin: 10px 0;
}
.disconnect-row {
    display: flex;
    align-items: center;
    gap: 6px;
}
.disconnect-label {
    font-size: 11px;
    color: var(--text-secondary);
    white-space: nowrap;
}
.disconnect-input {
    flex: 1;
    background: var(--bg-primary);
    border: 1px solid var(--border-primary);
    border-radius: 4px;
    color: var(--text-primary);
    font-family: var(--font-data);
    font-size: 12px;
    padding: 4px 8px;
}
.disconnect-confirm-btn {
    background: var(--red);
    color: white;
    border: none;
    border-radius: 4px;
    padding: 4px 10px;
    font-family: var(--font-ui);
    font-size: 11px;
    font-weight: 500;
    cursor: pointer;
}
.disconnect-confirm-btn:hover { filter: brightness(1.1); }
.disconnect-checkbox-row {
    margin-top: 8px;
}
.disconnect-checkbox {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    color: var(--text-secondary);
    cursor: pointer;
}
.disconnect-ban-note {
    font-size: 10px;
    color: var(--text-dim);
    margin-top: 6px;
    line-height: 1.4;
}
.disconnect-actions {
    display: flex;
    gap: 6px;
}
.disconnect-action-btn {
    flex: 1;
    background: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
    border-radius: 4px;
    color: var(--text-secondary);
    font-family: var(--font-ui);
    font-size: 11px;
    padding: 4px 8px;
    cursor: pointer;
    transition: all 0.15s;
}
.disconnect-action-btn:hover { background: var(--border-primary); color: var(--text-primary); }
.disconnect-action-btn-danger { color: var(--red); }
.disconnect-action-btn-danger:hover { background: rgba(248, 81, 73, 0.15); }

.disconnect-result {
    padding: 6px 8px;
    border-radius: 4px;
    font-size: 11px;
    margin-top: 8px;
}
.disconnect-result.success { background: rgba(63, 185, 80, 0.1); color: var(--green); }
.disconnect-result.error { background: rgba(248, 81, 73, 0.1); color: var(--red); }

/* ═══════════════════════════════════════════════════════════════ */
/* MODALS                                                          */
/* ═══════════════════════════════════════════════════════════════ */
.modal {
    display: none;
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.7);
    z-index: 1000;
    align-items: center;
    justify-content: center;
}
.modal.active { display: flex; }

.modal-content {
    background: var(--bg-secondary);
    border: 1px solid var(--border-primary);
    border-radius: 10px;
    width: 400px;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 16px 48px rgba(0,0,0,0.5);
}
.modal-content-wide { width: 560px; }

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 16px;
    border-bottom: 1px solid var(--border-primary);
}
.modal-header h3 {
    font-family: var(--font-ui);
    font-size: 14px;
    font-weight: 600;
}
.modal-close {
    background: none;
    border: none;
    color: var(--text-dim);
    font-size: 20px;
    cursor: pointer;
    padding: 0 4px;
    line-height: 1;
}
.modal-close:hover { color: var(--text-primary); }

.modal-body {
    padding: 16px;
    overflow-y: auto;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 6px;
}
.modal-body-single {
    display: block;
}

.modal-footer {
    padding: 10px 16px;
    border-top: 1px solid var(--border-primary);
    text-align: center;
}
.modal-footer-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    margin-bottom: 8px;
}
.modal-footer-label {
    font-size: 12px;
    color: var(--text-secondary);
}
.modal-footer-row select {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
    border-radius: 4px;
    color: var(--text-primary);
    font-family: var(--font-data);
    font-size: 11px;
    padding: 2px 6px;
}

.modal-body label {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 3px 0;
}

.restore-defaults-btn {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
    border-radius: 4px;
    color: var(--text-secondary);
    font-family: var(--font-ui);
    font-size: 11px;
    padding: 4px 12px;
    cursor: pointer;
    transition: all 0.15s;
}
.restore-defaults-btn:hover { background: var(--border-primary); color: var(--text-primary); }

/* Mempool/Blockchain modal stats */
.mempool-stats { }
.mempool-stat-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 6px 0;
    border-bottom: 1px solid var(--border-subtle);
}
.mempool-stat-row:last-child { border-bottom: none; }
.mempool-stat-label {
    color: var(--text-secondary);
    font-size: 12px;
}
.mempool-stat-value {
    color: var(--text-primary);
    font-family: var(--font-data);
    font-size: 12px;
    text-align: right;
}
.mempool-stat-sub {
    font-size: 10px;
    color: var(--text-dim);
    margin-top: 1px;
    text-align: right;
}
.mempool-loading, .bans-loading, .bans-empty {
    text-align: center;
    padding: 20px;
    color: var(--text-dim);
    font-style: italic;
}
.mempool-error, .bans-error {
    text-align: center;
    padding: 20px;
    color: var(--red);
}
.highlight { color: var(--net-ipv4) !important; }
.green { color: var(--green) !important; }
.orange { color: var(--orange) !important; }
.red { color: var(--red) !important; }

/* Bans list */
.bans-list { }
.bans-header {
    display: flex;
    padding: 4px 0 8px;
    border-bottom: 1px solid var(--border-primary);
    font-size: 10px;
    font-weight: 600;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.bans-header span { flex: 1; }
.bans-header-action { text-align: right; flex: 0 0 60px; }
.ban-row {
    display: flex;
    align-items: center;
    padding: 6px 0;
    border-bottom: 1px solid var(--border-subtle);
    font-size: 11px;
}
.ban-row span { flex: 1; }
.ban-ip { font-family: var(--font-data); color: var(--text-primary); }
.ban-expires { color: var(--text-secondary); font-family: var(--font-data); }
.ban-remaining { color: var(--yellow); font-family: var(--font-data); }
.ban-action { text-align: right; flex: 0 0 60px; }
.unban-btn {
    background: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
    border-radius: 3px;
    color: var(--text-secondary);
    font-size: 10px;
    padding: 2px 8px;
    cursor: pointer;
}
.unban-btn:hover { color: var(--red); border-color: var(--red); }

/* Connect Peer Modal */
.connect-instructions { margin-bottom: 12px; }
.connect-main-text { font-size: 12px; color: var(--text-secondary); }
.connect-note { font-size: 11px; color: var(--text-dim); margin-top: 4px; font-style: italic; }
.connect-examples {
    background: var(--bg-primary);
    border: 1px solid var(--border-subtle);
    border-radius: 6px;
    padding: 10px;
    margin-bottom: 12px;
}
.connect-examples-title {
    font-size: 11px;
    color: var(--text-dim);
    margin-bottom: 6px;
}
.connect-example {
    font-family: var(--font-data);
    font-size: 11px;
    color: var(--text-secondary);
    padding: 2px 0;
}
.example-type { color: var(--text-dim); font-family: var(--font-ui); font-weight: 500; }
.example-type-i2p { color: var(--net-i2p); }
.example-port { color: var(--text-dim); font-size: 10px; }
.connect-example-divider { border-top: 1px solid var(--border-subtle); margin: 6px 0; }
.i2p-required { color: var(--yellow); font-size: 10px; font-family: var(--font-ui); }
.connect-input-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 10px;
}
.connect-label { font-size: 12px; color: var(--text-secondary); white-space: nowrap; }
.connect-input {
    flex: 1;
    background: var(--bg-primary);
    border: 1px solid var(--border-primary);
    border-radius: 4px;
    color: var(--text-primary);
    font-family: var(--font-data);
    font-size: 12px;
    padding: 6px 10px;
}
.connect-input:focus { outline: 1px solid var(--accent); border-color: var(--accent); }
.connect-actions { text-align: right; }
.connect-btn {
    background: var(--green-dim);
    color: white;
    border: none;
    border-radius: 4px;
    padding: 6px 16px;
    font-family: var(--font-ui);
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
}
.connect-btn:hover { filter: brightness(1.15); }
.connect-btn:disabled { opacity: 0.5; cursor: default; }
.connect-result {
    display: none;
    padding: 6px 8px;
    border-radius: 4px;
    font-size: 11px;
    margin-top: 8px;
}
.connect-result.success { display: block; background: rgba(63, 185, 80, 0.1); color: var(--green); }
.connect-result.error { display: block; background: rgba(248, 81, 73, 0.1); color: var(--red); }
.connect-divider { border-top: 1px solid var(--border-primary); margin: 14px 0; }
.connect-permanent-title { font-size: 11px; color: var(--text-dim); margin-bottom: 6px; }
.connect-cmd-wrapper {
    display: flex;
    align-items: flex-start;
    gap: 6px;
    background: var(--bg-primary);
    border: 1px solid var(--border-subtle);
    border-radius: 4px;
    padding: 8px;
}
.connect-permanent-cmd {
    font-family: var(--font-data);
    font-size: 11px;
    color: var(--text-secondary);
    word-break: break-all;
    flex: 1;
}
.copy-btn {
    background: none;
    border: none;
    color: var(--text-dim);
    cursor: pointer;
    padding: 2px;
    flex-shrink: 0;
}
.copy-btn:hover { color: var(--accent); }
.copy-btn.copied { color: var(--green); }
.connect-permanent-note {
    font-size: 10px;
    color: var(--text-dim);
    margin-top: 6px;
}
.connect-permanent-note code {
    font-family: var(--font-data);
    background: var(--bg-tertiary);
    padding: 1px 4px;
    border-radius: 3px;
}
.connect-i2p-inline { color: var(--net-i2p); }

/* ═══════════════════════════════════════════════════════════════ */
/* CHANGES PANEL (bottom, hidden by default)                       */
/* ═══════════════════════════════════════════════════════════════ */
.changes-panel .table-container {
    max-height: 200px;
    overflow-y: auto;
}

.changes-table td {
    font-size: 11px;
}

.change-connected { color: var(--green); }
.change-disconnected { color: var(--red); }
.changes-window {
    font-size: 10px;
    color: var(--text-dim);
}

/* ═══════════════════════════════════════════════════════════════ */
/* FOOTER                                                          */
/* ═══════════════════════════════════════════════════════════════ */
.footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 16px;
    font-size: 11px;
    color: var(--text-dim);
}

.footer a {
    color: var(--text-secondary);
    text-decoration: none;
}
.footer a:hover { color: var(--text-primary); }

/* ═══════════════════════════════════════════════════════════════ */
/* PULSE ANIMATIONS                                                */
/* ═══════════════════════════════════════════════════════════════ */
@keyframes pulse-green {
    0% { color: #7ee787; }
    100% { color: var(--text-primary); }
}
@keyframes pulse-red {
    0% { color: #ffa198; }
    100% { color: var(--text-primary); }
}
@keyframes pulse-white-anim {
    0% { color: #ffffff; }
    100% { color: var(--text-primary); }
}

.pulse-up { animation: pulse-green 1.5s ease-out; }
.pulse-down { animation: pulse-red 1.5s ease-out; }
.pulse-up-long { animation: pulse-green 5s ease-out; }
.pulse-down-long { animation: pulse-red 5s ease-out; }
.pulse-white { animation: pulse-white-anim 1.5s ease-out; }

/* Price persistent colors */
.price-up { color: var(--green); }
.price-down { color: var(--red); }

@keyframes price-pulse-green {
    0% { color: #7ee787; }
    100% { color: var(--green); }
}
@keyframes price-pulse-red {
    0% { color: #ffa198; }
    100% { color: var(--red); }
}
.price-pulse-up { animation: price-pulse-green 2s ease-out; }
.price-pulse-down { animation: price-pulse-red 2s ease-out; }

/* Delta indicators - positioned absolutely within parent (network-filter-btn) */
.delta-indicator {
    font-family: var(--font-data);
    font-size: 10px;
    font-weight: 600;
    position: absolute;
    right: 4px;
    top: 50%;
    pointer-events: none;
    animation: delta-float 2.5s ease-out forwards;
}
.delta-up { color: var(--green); }
.delta-down { color: var(--red); }

@keyframes delta-float {
    0% { opacity: 1; transform: translateY(-50%); }
    70% { opacity: 1; transform: translateY(-50%); }
    100% { opacity: 0; transform: translateY(calc(-50% - 16px)); }
}

/* Hidden utility */
.hidden { display: none !important; }

/* ═══════════════════════════════════════════════════════════════ */
/* SCROLLBARS                                                      */
/* ═══════════════════════════════════════════════════════════════ */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: var(--bg-primary); }
::-webkit-scrollbar-thumb { background: var(--border-primary); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-dim); }

/* ═══════════════════════════════════════════════════════════════ */
/* LEAFLET OVERRIDES                                               */
/* ═══════════════════════════════════════════════════════════════ */
.leaflet-container {
    background: var(--bg-primary) !important;
    font-family: var(--font-ui) !important;
    z-index: 1 !important;
}
.leaflet-control-zoom a {
    background: var(--bg-secondary) !important;
    color: var(--text-secondary) !important;
    border-color: var(--border-primary) !important;
}
.leaflet-control-zoom a:hover {
    background: var(--bg-tertiary) !important;
    color: var(--text-primary) !important;
}
.leaflet-control-attribution {
    background: rgba(13, 17, 23, 0.7) !important;
    color: var(--text-dim) !important;
    font-size: 9px !important;
}
.leaflet-control-attribution a { color: var(--text-dim) !important; }
